<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<head>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
</head>

<div layout:fragment="content">
    <p><a th:href="@{/}">Main으로 이동</a> </p>
    <p><a th:href="@{/api}">NaverApiSearch로 이동</a> </p>
    <p><a th:href="@{/craw}">CrawlingSearch로 이동</a></p>
    <p><a th:href="@{/mining}">Mining으로 이동</a></p>

    <h3>텍스트 마이닝 테스트</h3>

    <ul>
        <li>Input 창에 네이버 뉴스 기사 URL 입력</li>
    </ul>
<!--  <table>-->
<!--    <tr th:each="arr:${arrs}">-->
<!--      <span th:text="${arrStat.index+1}"></span>-->
<!--      <a th:href="${arr}" th:text="${arr}"></a>-->
<!--      <br>-->
<!--    </tr>-->
<!--  </table>-->
<!--  <form action="/getURL" method="post">-->
    <input type="text" class="text-form" placeholder="URL 입력" style="width: 70%">
    <button type="button" id="SendURL" class="SendURL" style="width: 20%">검색</button>

<!--  </form>-->
  <div class="inside-text">

  </div>

  <script>

      // $("#SendURL").on('click', function () {
        $(".SendURL").click(function() {
        var url = $(".text-form").val();
        var contents = "";
        if (url == "")
          alert("URL이 입력되지않았습니다.")
        else {
          $.ajax({
            url: '/mining',
            data: {URL: url},
            dataType: 'json',
            method: 'post',
            success: function (data) {
              var words = new Array();
              var valueWord = new Set(data);
              $('.inside-text').empty();
                words = [...valueWord];
              for (var i = 0; i < data.length; i++) {
                  // contents += `<p class="a${[i]}">${words[i]}</p>`;
                  contents += `<p class="a${[i]}">${words[i]}</p>`;
              }
              $(".inside-text").append(
                      contents + "&nbsp"
                      + "&nbsp");


              for (var i = 0; i < data.length; i++) {
                for (var j = i; j < data.length; j++) {
                  if (data[i] == words[j]) {
                    var size = $(".a" + [i]).css('font-size', "+=10");;
                  }
                }
              }
            },
            error: function () {
              if (url != "")
                alert("알 수 없는 오류 입니다.");
            }
          })
        }
      });

  </script>


</div>


</body>
</html>
